/*!
 * fancyInput v0.9.0
 * https://github.com/myspace-nu
 *
 * Copyright 2023 Johan Johansson
 * Released under the MIT license
 */
class fancyInput{static initialized=!1;constructor(e,t){if(this.options=Object.assign({allowLineBreaks:!1,className:"fancyinput",classNameFocus:"focus",copyComputedStyle:!0,copyStyle:!0,onChange:(e,t,i)=>e},t),"object"==typeof(e="string"==typeof e?document.querySelectorAll(e):e)&&1<e.length){let t=[];return e.forEach(e=>{t.push(new fancySlider(e))}),t}if(e[0]&&"text"===e[0].type){if(this.input=e[0],this.element=document.createElement("div"),this.input.parentNode.insertBefore(this.element,this.input.nextSibling),this.element.className=this.options.className,this.element.innerHTML=this.input.value,this.options.copyComputedStyle){const l=window.getComputedStyle(this.input);var i,s=window.getComputedStyle(this.element);for(i of l)l[i]!==s[i]&&this.element.style.setProperty(i,l.getPropertyValue(i),l.getPropertyPriority(i))}if(this.element.style["vertical-align"]="top",this.element.style["-webkit-user-modify"]="read-write",this.element.style["user-modify"]="read-write",this.element.style["user-select"]="initial",this.element.style["overflow-y"]="hidden",this.options.copyStyle){this.element.style.height=this.input.offsetHeight+"px";for(var n of this.input.style)this.element.style[n]=this.input.style[n]}return this.element.contentEditable=!0,["focus","blur","paste","keyup","keypress","keydown"].forEach(e=>{this.element.addEventListener(e,e=>{if(this.options.allowLineBreaks||13!==e.which||e.preventDefault(),"keydown"===e.type&&(e.ctrlKey||e.metaKey))switch(String.fromCharCode(e.which).toLowerCase()){case"b":e.preventDefault(),document.execCommand("Bold",!1,null);break;case"u":e.preventDefault(),document.execCommand("Underline",!1,null);break;case"i":e.preventDefault(),document.execCommand("Italic",!1,null)}"focus"===e.type&&this.element.classList.add(this.options.classNameFocus),"blur"===e.type&&this.element.classList.remove(this.options.classNameFocus),this.input.value=this.options.onChange.call(this,e.target.innerHTML,e,this.input),"blur"===e.type&&this.input.value!==e.target.innerHTML&&(e.target.innerHTML=this.input.value),"blur"===e.type&&this.input.dispatchEvent(new Event("change"))})}),this.input.type="hidden",this.initialized=!0,this}}validTags(e,...s){return e.replace(/<(\/?)(\w+)[^>]*\/?>/g,(e,t,i)=>s.includes(i)?"<"+t+i+">":"").replace(/<!--.*?-->/g,"")}}